# Changes

## [Unreleased](https://github.com/crim-ca/stac-populator) (latest)

<!-- insert list items of new changes here -->
* Make sure *bounds* variables are given the auxiliary type attribute. 
* Fix for variables that have no attributes.
* Adding ability to add collection level assets
* Adding ability to add collection level links
* Adding collection links to `CMIP6_UofT`
* Adding an end date to `CMIP6_UofT`'s temporal extent for better rendering in STAC Browser
* Updates to datacube extension helper routines for `CMIP6_UofT`.
* Make pyessv-archive a requirement for *only* the cmip6 implementation instead of for the whole CLI
* Fix bug where logger setup failed
* Simplify CLI argument constructor code (for cleaner and more testable code)
* Add tests for CLI and implementations when invoked through the CLI
* Refactored code dealing with requests and authentication to the `STACpopulator/requests.py` file
* Add `--log-file` command line option to specify a non-default location to write log files to
* fix incorrect example in README
* move argument parsing for logging options to the implementation code
* fix bug where logging options were being set incorrectly
* rename files to avoid potential naming conflicts with other packages (`logging` and `requests`)
* fix bug where populator scripts could not be called directly from the command line

## [0.6.0](https://github.com/crim-ca/stac-populator/tree/0.6.0) (2024-02-22)


* Add validation to the STAC Items in `CMIP6_UofT` implementation.
* Replace CMIP6 JSON-schema URL to
  `"https://raw.githubusercontent.com/dchandan/stac-extension-cmip6/main/json-schema/schema.json"`
  for a more up-to-date validation of available STAC CMIP6 properties.
* Add `.jsonl` logging and error reporting of failed STAC Item publishing to the server.
* Improve logging configuration setup and level selection from CLI `--debug` argument.
* Fix a bug related to `THREDDSLoader` incorrectly handling the depth of crawled directories.

## [0.5.0](https://github.com/crim-ca/stac-populator/tree/0.5.0) (2024-01-09)


* Refactor CMIP6 implementation using distinct classes to define THREDDS helper utilities and the CMIP6 STAC Extension
  using the same implementation strategy as other [`pystac`](https://github.com/stac-utils/pystac) extensions.
* Add additional CMIP6 STAC Extension definitions to support STAC Collections, Items and Assets properties validation.
* Update README with a table providing missing `DirectoryLoader` implementation and adding `CMIP6_UofT` description.

## [0.4.0](https://github.com/crim-ca/stac-populator/tree/0.4.0) (2023-11-27)


* Replace logic to resolve and load specific implementation configuration file of a populator to avoid depending on
  inconsistent caller (`python <impl-module.py>` vs `stac-populator run <impl>`).
* Fix configuration file of populator implementation not found when package is installed.
* Allow a populator implementation to override the desired configuration file.
* Add missing CLI `default="full"` mode for `CMIP6_UofT` populator implementation.
* Fix Docker entrypoint to use `stac-populator` to make call to the CLI more convenient.
* Add `get_logger` function to avoid repeated configuration across modules.
* Make sure that each implementation and module employs their own logger.

## [0.3.0](https://github.com/crim-ca/stac-populator/tree/0.3.0) (2023-11-16)


* Add request ``session`` keyword to all request-related functions and populator methods to allow sharing a common set
  of settings (`auth`, SSL `verify`, `cert`) across requests toward the STAC Catalog.
* Add `DirectoryLoader` that allows populating a STAC Catalog with Collections and Items loaded from a crawled directory
  hierarchy that contains `collection.json` files and other `.json`/`.geojson` items.
* Add a generic CLI `stac-populator` that can be called to run populator implementations directly
  using command `stac-populator run <implementation> [impl-args]`.
* Remove hardcoded `verify=False` to requests calls.
  If needed for testing purposes, users should use a custom `requests.sessions.Session` with `verify=False` passed to
  the populator, or alternatively, employ the CLI argument `--no-verify` that will accomplish the same behavior.

## [0.2.0](https://github.com/crim-ca/stac-populator/tree/0.2.0) (2023-11-10)


* Add `LICENSE` file.
* Add `bump-my-version` with `make version` and `make VERSION=<...> bump` utilities to self-update release versions.
* Add more metadata to `pyproject.toml`.
* Adjust `README.md` with updated references and release version indicators.
* Add `CHANGES.md` to record version updates.
* Add `dev` dependencies to `pyproject.toml` for testing the package (install with `pip install ".[dev]"`).
* Add GitHub CI tests.
* Remove `requirements.txt` in favor of all dependencies combined in `pyproject.toml`.
* Add test to validate STAC Collection and Item contain `source` with expected THREDDS format.
* Fix broken tests and invalid imports.

## [0.1.0](https://github.com/crim-ca/stac-populator/tree/0.1.0) (2023-11-08)


* Refactor of `CMIP6_UofT` with more robust parsing strategies and STAC Item generation from THREDDS NCML metadata.

## [0.0.1](https://github.com/crim-ca/stac-populator/tree/0.0.1) (2023-08-22)

* Initial release with implementation of `CMIP6_UofT`.
